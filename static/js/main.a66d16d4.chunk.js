(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{14:function(t,e,i){},15:function(t,e,i){},16:function(t,e,i){"use strict";i.r(e);var o=i(0),n=i.n(o),l=i(3),r=i.n(l),s=(i(14),i(4)),a=i(5),f=i(7),m=i(6),u=i(1),c=i(8),v=(i(15),function(t){function e(){var t;Object(s.a)(this,e),t=Object(f.a)(this,Object(m.a)(e).call(this));for(var i=new Array(12),o=0;o<12;o++){i[o]=new Array(12);for(var l=0;l<12;l++)i[o][l]={isFilled:!1,color:l%2===0?"#e6e6ff":"#f2f2f2"}}return t.state={gameState:1,isMoving:!1,tiles:i,colors:["#3399ff","#0000e6","#ff9933","#ffff4d","#66ff66","#cc33ff","#e60000"],currentFigure:{type:-1,blocks:[]},pseudoBorderDiv:n.a.createElement("div",{style:{position:"relative",width:"calc(100% - 2px)",height:"calc(100% - 2px)",border:"1px solid white"}}),score:0,level:1},t.keyHandling=t.keyHandling.bind(Object(u.a)(t)),t}return Object(c.a)(e,t),Object(a.a)(e,[{key:"render",value:function(){var t=this,e=8.333333333333332,i=-8.333333333333332,o=-8.333333333333332,l=this.state.currentFigure;return n.a.createElement("center",null,n.a.createElement("div",{style:{position:"relative",width:"100vmin",height:"100vmin"}},this.state.tiles.map((function(l,r){return o+=e,i=-8.333333333333332,l.map((function(l,s){return i+=e,n.a.createElement("div",{key:"tile"+r+s,className:"tile",style:{left:i+"vmin",bottom:o+"vmin",backgroundColor:l.color}},l.isFilled?t.state.pseudoBorderDiv:t.props.textOrHtml)}))})),2===this.state.gameState&&-1!==l.type&&l.hasOwnProperty("blocks")?n.a.createElement("div",{style:{position:"absolute",left:l.left*e+"vmin",bottom:l.bottom*e+"vmin",width:l.figWidth,height:l.figHeight}},l.blocks.map((function(i,o){return n.a.createElement("div",{key:o+"block",className:"block",style:{left:(i.j-l.left)*e+"vmin",bottom:(i.i-l.bottom)*e+"vmin",backgroundColor:t.state.currentFigure.color}},t.state.pseudoBorderDiv)}))):this.props.textOrHtml),2!==this.state.gameState?n.a.createElement("button",{style:{position:"absolute",left:0,top:0},onClick:function(){return t.startNewGame()}},"NEW GAME"):this.props.textOrHtml,3===this.state.gameState?n.a.createElement("p",{style:{position:"absolute",left:0,top:"40px"}},"Game Over! You reached level ",this.state.level):4===this.state.gameState?n.a.createElement("p",{style:{position:"absolute",left:0,top:"40px"}},"YOU LOST"):this.props.textOrHtml,n.a.createElement("p",{style:{position:"absolute",left:0,top:"60px"}},"Rotation - SPACEBAR"),n.a.createElement("p",{style:{position:"absolute",left:0,top:"80px"}},"Movement - Arrows R L"),1!==this.state.gameState?n.a.createElement("div",{style:{position:"absolute",left:"10px",top:"120px",backgroundColor:"#0099ff",paddingLeft:"10px",paddingRight:"10px",borderRadius:"5px"}},n.a.createElement("p",null,"Score: ",this.state.score),n.a.createElement("p",null,"Level: ",this.state.level)):this.props.textOrHtml)}},{key:"startNewGame",value:function(){for(var t=this,e=new Array(12),i=0;i<12;i++){e[i]=new Array(12);for(var o=0;o<12;o++)e[i][o]={isFilled:!1,color:o%2===0?"#e6e6ff":"#f2f2f2"}}this.setState({gameState:2,tiles:e,score:0,level:1},(function(){t.moveFigureDown()}))}},{key:"moveFigureDown",value:function(){var t=this;if(2===this.state.gameState)if(-1===this.state.currentFigure.type){var e=Math.floor(Math.random()*Math.floor(7)),i={left:Math.floor(Math.random()*Math.floor(8)),bottom:11,position:0,color:this.state.colors[e]};this.setState({currentFigure:i},(function(){t.updateFigure(e,i.position)}))}else this.moveDown()}},{key:"moveDown",value:function(){for(var t=this,e=this.state.currentFigure,i=e.blocks,o=0;o<i.length;o++)if(0===i[o].i)return void this.fillTiles();for(var n=this.state.tiles,l=0;l<i.length;l++)if(!(i[l].i>11)&&n[i[l].i-1][i[l].j].isFilled)return void this.fillTiles();e.bottom--,this.setState({currentFigure:e},(function(){return t.updateFigure(e.type,e.position)}))}},{key:"fillTiles",value:function(){for(var t=this,e=this.state.currentFigure,i=e.blocks,o=this.state.tiles,n=0;n<i.length;n++)i[n].i>11||(o[i[n].i][i[n].j]={isFilled:!0,color:e.color});this.setState({tiles:o},(function(){return t.checkLines()}))}},{key:"checkLines",value:function(){for(var t=this.state.tiles,e=0,i=11;i>-1;i--)for(var o=0;o<12;o++){for(var n=!0,l=0;l<12;l++)if(!t[o][l].isFilled){n=!1;break}if(n){e+=12;for(var r=o;r<11;r++)for(var s=0;s<12;s++)t[r][s]={isFilled:t[r+1][s].isFilled,color:t[r+1][s].color};for(var a=0;a<12;a++)t[i][a]={isFilled:!1,color:a%2===0?"#e6e6ff":"#f2f2f2"}}}for(var f=!0,m=0;m<12;m++)if(t[0][m].isFilled){f=!1;break}for(var u=!1,c=this.state.currentFigure.blocks,v=0;v<c.length;v++)if(c[v].i>=11){u=!0;break}this.setState({tiles:t,currentFigure:{type:-1,blocks:[]},score:this.state.score+e,gameState:f?3:u?4:2})}},{key:"updateFigure",value:function(t,e){var i=this.state.currentFigure;i.type=t;var o=8.333333333333332,n=[],l="",r="";0===t?0===e||2===e?(l=4*o+"vmin",r=o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2},{i:i.bottom,j:i.left+3}]):(l=o+"vmin",r=4*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left},{i:i.bottom+3,j:i.left}]):1===t?0===e?(l=3*o+"vmin",r=2*o+"vmin",n=[{i:i.bottom+1,j:i.left},{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2}]):1===e?(l=2*o+"vmin",r=3*o+"vmin",n=[{i:i.bottom+2,j:i.left+1},{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left}]):2===e?(l=3*o+"vmin",r=2*o+"vmin",n=[{i:i.bottom,j:i.left+2},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1},{i:i.bottom+1,j:i.left+2}]):3===e&&(l=2*o+"vmin",r=3*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1},{i:i.bottom+2,j:i.left+1}]):2===t?0===e?(l=3*o+"vmin",r=2*o+"vmin",n=[{i:i.bottom+1,j:i.left+2},{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2}]):1===e?(l=2*o+"vmin",r=3*o+"vmin",n=[{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left}]):2===e?(l=3*o+"vmin",r=2*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1},{i:i.bottom+1,j:i.left+2}]):3===e&&(l=2*o+"vmin",r=3*o+"vmin",n=[{i:i.bottom+2,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1},{i:i.bottom+2,j:i.left+1}]):3===t?(l=2*o+"vmin",r=2*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1}]):4===t?0===e||2===e?(l=3*o+"vmin",r=2*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1},{i:i.bottom+1,j:i.left+2}]):(l=2*o+"vmin",r=3*o+"vmin",n=[{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1}]):5===t?0===e?(l=3*o+"vmin",r=2*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2},{i:i.bottom+1,j:i.left+1}]):1===e?(l=2*o+"vmin",r=3*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left},{i:i.bottom+1,j:i.left+1}]):2===e?(l=3*o+"vmin",r=2*o+"vmin",n=[{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1},{i:i.bottom+1,j:i.left+2}]):3===e&&(l=2*o+"vmin",r=3*o+"vmin",n=[{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1},{i:i.bottom+2,j:i.left+1},{i:i.bottom+1,j:i.left}]):6===t&&(0===e||2===e?(l=3*o+"vmin",r=2*o+"vmin",n=[{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1}]):1!==e&&3!==e||(l=2*o+"vmin",r=3*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1},{i:i.bottom+2,j:i.left+1}])),i.blocks=n,i.figHeight=r,i.figWidth=l,this.setState({currentFigure:i})}},{key:"keyHandling",value:function(t){var e=this;if(2===this.state.gameState&&!this.state.isMoving){for(var i=this.state.currentFigure.blocks,o=0;o<i.length;o++)if(i[o].i>11)return;var n=t.keyCode;if(32===n){var l=this.state.currentFigure;l.position<3?l.position++:l.position=0,this.setState({currentFigure:l},(function(){return e.updateFigure(l.type,l.position)}))}if(37===n){var r=this.state.currentFigure;if(0===r.left)return;for(var s=r.blocks,a=this.state.tiles,f=0;f<s.length;f++)if(a[s[f].i][s[f].j-1].isFilled)return;this.setState({isMoving:!0},(function(){r.left--,e.setState({currentFigure:r,isMoving:!1},(function(){return e.updateFigure(r.type,r.position)}))}))}if(39===n){for(var m=this.state.currentFigure,u=m.blocks,c=this.state.tiles,v=0;v<u.length;v++)if(11===u[v].j)return;for(var b=0;b<u.length;b++)if(c[u[b].i][u[b].j+1].isFilled)return;this.setState({isMoving:!0},(function(){m.left++,e.setState({currentFigure:m,isMoving:!1},(function(){return e.updateFigure(m.type,m.position)}))}))}}}},{key:"componentDidMount",value:function(){var t=this;window.addEventListener("keyup",this.keyHandling),setInterval((function(){return t.moveFigureDown()}),400)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.keyHandling)}}]),e}(n.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},9:function(t,e,i){t.exports=i(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.a66d16d4.chunk.js.map