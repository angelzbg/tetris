(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{14:function(t,e,i){},15:function(t,e,i){},16:function(t,e,i){"use strict";i.r(e);var o=i(0),n=i.n(o),r=i(3),l=i.n(r),s=(i(14),i(4)),a=i(5),f=i(7),m=i(6),u=i(1),c=i(8),v=(i(15),function(t){function e(){var t;Object(s.a)(this,e),t=Object(f.a)(this,Object(m.a)(e).call(this));for(var i=new Array(12),o=0;o<12;o++){i[o]=new Array(12);for(var r=0;r<12;r++)i[o][r]={isFilled:!1,color:r%2===0?"#e6e6ff":"#f2f2f2"}}return t.state={gameState:1,isMoving:!1,tiles:i,colors:["#3399ff","#0000e6","#ff9933","#ffff4d","#66ff66","#cc33ff","#e60000"],currentFigure:{type:-1,blocks:[]},pseudoBorderDiv:n.a.createElement("div",{style:{position:"relative",width:"calc(100% - 2px)",height:"calc(100% - 2px)",border:"1px solid white"}}),score:0,currentSpeed:500},t.keyHandling=t.keyHandling.bind(Object(u.a)(t)),t}return Object(c.a)(e,t),Object(a.a)(e,[{key:"render",value:function(){var t=this,e=8.333333333333332,i=-8.333333333333332,o=-8.333333333333332,r=this.state.currentFigure;return n.a.createElement("center",null,n.a.createElement("div",{style:{position:"relative",width:"100vmin",height:"100vmin"}},this.state.tiles.map((function(r,l){return o+=e,i=-8.333333333333332,r.map((function(r,s){return i+=e,n.a.createElement("div",{key:"tile"+l+s,className:"tile",style:{left:i+"vmin",bottom:o+"vmin",backgroundColor:r.color}},r.isFilled?t.state.pseudoBorderDiv:t.props.textOrHtml)}))})),2===this.state.gameState&&-1!==r.type&&r.hasOwnProperty("blocks")?n.a.createElement("div",{style:{position:"absolute",left:r.left*e+"vmin",bottom:r.bottom*e+"vmin",width:r.figWidth,height:r.figHeight}},r.blocks.map((function(i,o){return n.a.createElement("div",{key:o+"block",className:"block",style:{left:(i.j-r.left)*e+"vmin",bottom:(i.i-r.bottom)*e+"vmin",backgroundColor:t.state.currentFigure.color}},t.state.pseudoBorderDiv)}))):this.props.textOrHtml),2!==this.state.gameState?n.a.createElement("button",{style:{position:"absolute",left:0,top:0},onClick:function(){return t.startNewGame()}},"NEW GAME"):this.props.textOrHtml,3===this.state.gameState?n.a.createElement("p",{style:{position:"absolute",left:0,top:"40px"}},"You won at level ",this.state.level):4===this.state.gameState?n.a.createElement("p",{style:{position:"absolute",left:0,top:"40px"}},"YOU LOST"):this.props.textOrHtml,n.a.createElement("p",{style:{position:"absolute",left:0,top:"60px"}},"Rotation - SPACEBAR"),n.a.createElement("p",{style:{position:"absolute",left:0,top:"80px"}},"Movement - Arrows R L D"),1!==this.state.gameState?n.a.createElement("div",{style:{position:"absolute",left:"10px",top:"120px",backgroundColor:"#0099ff",paddingLeft:"10px",paddingRight:"10px",borderRadius:"5px"}},n.a.createElement("p",null,"Score: ",this.state.score),n.a.createElement("p",null,"Current speed: ",this.state.currentSpeed)):this.props.textOrHtml)}},{key:"startNewGame",value:function(){for(var t=this,e=new Array(12),i=0;i<12;i++){e[i]=new Array(12);for(var o=0;o<12;o++)e[i][o]={isFilled:!1,color:o%2===0?"#e6e6ff":"#f2f2f2"}}this.setState({gameState:2,tiles:e,score:0,currentSpeed:500},(function(){t.moveFigureDown()}))}},{key:"moveFigureDown",value:function(){var t=this;if(2===this.state.gameState)if(-1===this.state.currentFigure.type){var e=Math.floor(Math.random()*Math.floor(7)),i={left:Math.floor(Math.random()*Math.floor(8)),bottom:11,position:0,color:this.state.colors[e]};this.setState({currentFigure:i},(function(){t.updateFigure(e,i.position)}),(function(){return t.moveDown()}))}else this.moveDown()}},{key:"moveDown",value:function(){for(var t=this,e=this.state.currentFigure,i=e.blocks,o=0;o<i.length;o++)if(0===i[o].i)return void this.fillTiles();for(var n=this.state.tiles,r=0;r<i.length;r++)if(!(i[r].i>11)&&n[i[r].i-1][i[r].j].isFilled)return void this.fillTiles();e.bottom--,this.setState({currentFigure:e},(function(){return t.updateFigure(e.type,e.position)}))}},{key:"fillTiles",value:function(){for(var t=this,e=this.state.currentFigure,i=e.blocks,o=this.state.tiles,n=0;n<i.length;n++)i[n].i>11||(o[i[n].i][i[n].j]={isFilled:!0,color:e.color});this.setState({tiles:o},(function(){return t.checkLines()}))}},{key:"checkLines",value:function(){for(var t=this.state.tiles,e=0,i=11;i>-1;i--)for(var o=0;o<12;o++){for(var n=!0,r=0;r<12;r++)if(!t[o][r].isFilled){n=!1;break}if(n){e+=12;for(var l=o;l<11;l++)for(var s=0;s<12;s++)t[l][s]={isFilled:t[l+1][s].isFilled,color:t[l+1][s].color};for(var a=0;a<12;a++)t[i][a]={isFilled:!1,color:a%2===0?"#e6e6ff":"#f2f2f2"}}}for(var f=!0,m=0;m<12;m++)if(t[0][m].isFilled){f=!1;break}for(var u=!1,c=this.state.currentFigure.blocks,v=0;v<c.length;v++)if(c[v].i>=11){u=!0;break}this.setState({tiles:t,currentFigure:{type:-1,blocks:[]},score:this.state.score+e,gameState:f?3:u?4:2})}},{key:"updateFigure",value:function(t,e){var i=this.state.currentFigure;i.type=t;var o=8.333333333333332,n=[],r="",l="";0===t?0===e||2===e?(r=4*o+"vmin",l=o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2},{i:i.bottom,j:i.left+3}]):(r=o+"vmin",l=4*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left},{i:i.bottom+3,j:i.left}]):1===t?0===e?(r=3*o+"vmin",l=2*o+"vmin",n=[{i:i.bottom+1,j:i.left},{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2}]):1===e?(r=2*o+"vmin",l=3*o+"vmin",n=[{i:i.bottom+2,j:i.left+1},{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left}]):2===e?(r=3*o+"vmin",l=2*o+"vmin",n=[{i:i.bottom,j:i.left+2},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1},{i:i.bottom+1,j:i.left+2}]):3===e&&(r=2*o+"vmin",l=3*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1},{i:i.bottom+2,j:i.left+1}]):2===t?0===e?(r=3*o+"vmin",l=2*o+"vmin",n=[{i:i.bottom+1,j:i.left+2},{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2}]):1===e?(r=2*o+"vmin",l=3*o+"vmin",n=[{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left}]):2===e?(r=3*o+"vmin",l=2*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1},{i:i.bottom+1,j:i.left+2}]):3===e&&(r=2*o+"vmin",l=3*o+"vmin",n=[{i:i.bottom+2,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1},{i:i.bottom+2,j:i.left+1}]):3===t?(r=2*o+"vmin",l=2*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1}]):4===t?0===e||2===e?(r=3*o+"vmin",l=2*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1},{i:i.bottom+1,j:i.left+2}]):(r=2*o+"vmin",l=3*o+"vmin",n=[{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1}]):5===t?0===e?(r=3*o+"vmin",l=2*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2},{i:i.bottom+1,j:i.left+1}]):1===e?(r=2*o+"vmin",l=3*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+2,j:i.left},{i:i.bottom+1,j:i.left+1}]):2===e?(r=3*o+"vmin",l=2*o+"vmin",n=[{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1},{i:i.bottom+1,j:i.left+2}]):3===e&&(r=2*o+"vmin",l=3*o+"vmin",n=[{i:i.bottom,j:i.left+1},{i:i.bottom+1,j:i.left+1},{i:i.bottom+2,j:i.left+1},{i:i.bottom+1,j:i.left}]):6===t&&(0===e||2===e?(r=3*o+"vmin",l=2*o+"vmin",n=[{i:i.bottom,j:i.left+1},{i:i.bottom,j:i.left+2},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1}]):1!==e&&3!==e||(r=2*o+"vmin",l=3*o+"vmin",n=[{i:i.bottom,j:i.left},{i:i.bottom+1,j:i.left},{i:i.bottom+1,j:i.left+1},{i:i.bottom+2,j:i.left+1}])),i.blocks=n,i.figHeight=l,i.figWidth=r,this.setState({currentFigure:i})}},{key:"keyHandling",value:function(t){var e=this;if(2===this.state.gameState&&!this.state.isMoving){for(var i=this.state.currentFigure.blocks,o=0;o<i.length;o++)if(i[o].i>11)return;var n=t.keyCode;if(32===n){var r=this.state.currentFigure;r.position<3?r.position++:r.position=0,this.setState({currentFigure:r},(function(){return e.updateFigure(r.type,r.position)}))}else if(37===n){var l=this.state.currentFigure;if(0===l.left)return;for(var s=l.blocks,a=this.state.tiles,f=0;f<s.length;f++)if(a[s[f].i][s[f].j-1].isFilled)return;this.setState({isMoving:!0},(function(){l.left--,e.setState({currentFigure:l,isMoving:!1},(function(){return e.updateFigure(l.type,l.position)}))}))}else if(39===n){for(var m=this.state.currentFigure,u=m.blocks,c=this.state.tiles,v=0;v<u.length;v++)if(11===u[v].j)return;for(var b=0;b<u.length;b++)if(c[u[b].i][u[b].j+1].isFilled)return;this.setState({isMoving:!0},(function(){m.left++,e.setState({currentFigure:m,isMoving:!1},(function(){return e.updateFigure(m.type,m.position)}))}))}else 40===n&&this.moveFigureDown()}}},{key:"componentDidMount",value:function(){var t=this;window.addEventListener("keyup",this.keyHandling),this.interval=setInterval((function(){return t.checkInterval()}),this.state.currentSpeed)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.keyHandling),clearInterval(this.interval)}},{key:"checkInterval",value:function(){var t=this;this.moveFigureDown();var e=500,i=this.state.score;e=i<20?500:i<40?450:i<60?400:i<100?300:i<150?200:100,this.state.currentSpeed!==e&&(clearInterval(this.interval),this.setState({currentSpeed:e},(function(){return t.interval=setInterval((function(){return t.checkInterval()}),t.state.currentSpeed)})))}}]),e}(n.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},9:function(t,e,i){t.exports=i(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.64e29c3c.chunk.js.map