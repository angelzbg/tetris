(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{14:function(t,e,i){},15:function(t,e,i){},16:function(t,e,i){"use strict";i.r(e);var o=i(0),r=i.n(o),n=i(3),l=i.n(n),s=(i(14),i(4)),a=i(5),f=i(7),m=i(6),u=i(1),c=i(8),v=(i(15),function(t){function e(){var t;Object(s.a)(this,e),t=Object(f.a)(this,Object(m.a)(e).call(this));for(var i=new Array(12),o=0;o<12;o++){i[o]=new Array(12);for(var n=0;n<12;n++)i[o][n]={isFilled:!1,color:n%2===0?"#e6e6ff":"#f2f2f2"}}return t.state={gameState:1,isMoving:!1,tiles:i,colors:["#3399ff","#0000e6","#ff9933","#ffff4d","#66ff66","#cc33ff","#e60000"],currentFigure:{type:-1,blocks:[]},pseudoBorderDiv:r.a.createElement("div",{style:{position:"relative",width:"calc(100% - 2px)",height:"calc(100% - 2px)",border:"1px solid white"}}),score:0,currentSpeed:500},t.keyHandling=t.keyHandling.bind(Object(u.a)(t)),t}return Object(c.a)(e,t),Object(a.a)(e,[{key:"render",value:function(){var t=this,e=8.333333333333332,i=-8.333333333333332,o=-8.333333333333332,n=this.state.currentFigure;return r.a.createElement("center",null,r.a.createElement("div",{style:{position:"relative",width:"100vmin",height:"100vmin"}},this.state.tiles.map((function(n,l){return o+=e,i=-8.333333333333332,n.map((function(n,s){return i+=e,r.a.createElement("div",{key:"tile"+l+s,className:"tile",style:{left:i+"vmin",bottom:o+"vmin",backgroundColor:n.color}},n.isFilled?t.state.pseudoBorderDiv:t.props.textOrHtml)}))})),2===this.state.gameState&&-1!==n.type&&n.hasOwnProperty("blocks")?r.a.createElement("div",{style:{position:"absolute",left:n.left*e+"vmin",bottom:n.bottom*e+"vmin",width:n.figWidth,height:n.figHeight}},n.blocks.map((function(i,o){return r.a.createElement("div",{key:o+"block",className:"block",style:{left:(i.j-n.left)*e+"vmin",bottom:(i.i-n.bottom)*e+"vmin",backgroundColor:t.state.currentFigure.color}},t.state.pseudoBorderDiv)}))):this.props.textOrHtml),2!==this.state.gameState?r.a.createElement("button",{style:{position:"absolute",left:0,top:0},onClick:function(){return t.startNewGame()}},"NEW GAME"):this.props.textOrHtml,3===this.state.gameState?r.a.createElement("p",{style:{position:"absolute",left:0,top:"40px"}},"You won at level ",this.state.level):4===this.state.gameState?r.a.createElement("p",{style:{position:"absolute",left:0,top:"40px"}},"YOU LOST"):this.props.textOrHtml,r.a.createElement("p",{style:{position:"absolute",left:0,top:"60px"}},"Rotation - SPACEBAR"),r.a.createElement("p",{style:{position:"absolute",left:0,top:"80px"}},"Movement - Arrows R L D"),1!==this.state.gameState?r.a.createElement("div",{style:{position:"absolute",left:"10px",top:"120px",backgroundColor:"#0099ff",paddingLeft:"10px",paddingRight:"10px",borderRadius:"5px"}},r.a.createElement("p",null,"Score: ",this.state.score),r.a.createElement("p",null,"Current speed: ",this.state.currentSpeed)):this.props.textOrHtml)}},{key:"startNewGame",value:function(){for(var t=this,e=new Array(12),i=0;i<12;i++){e[i]=new Array(12);for(var o=0;o<12;o++)e[i][o]={isFilled:!1,color:o%2===0?"#e6e6ff":"#f2f2f2"}}clearInterval(this.interval),this.setState({gameState:2,tiles:e,score:0,currentSpeed:500},(function(){t.interval=setInterval((function(){return t.checkInterval()}),t.state.currentSpeed),t.moveFigureDown()}))}},{key:"moveFigureDown",value:function(){var t=this;if(2===this.state.gameState)if(-1===this.state.currentFigure.type){var e=Math.floor(Math.random()*Math.floor(7)),i={left:Math.floor(Math.random()*Math.floor(8)),bottom:11,position:0,color:this.state.colors[e]};this.setState({currentFigure:i},(function(){t.updateFigure(e,i.position)}),(function(){return t.moveDown()}))}else this.moveDown()}},{key:"moveDown",value:function(){for(var t=this,e=this.state.currentFigure,i=e.blocks,o=0;o<i.length;o++)if(0===i[o].i)return void this.fillTiles();for(var r=this.state.tiles,n=0;n<i.length;n++)if(!(i[n].i>11)&&r[i[n].i-1][i[n].j].isFilled)return void this.fillTiles();e.bottom--,this.setState({currentFigure:e},(function(){return t.updateFigure(e.type,e.position)}))}},{key:"fillTiles",value:function(){for(var t=this,e=this.state.currentFigure,i=e.blocks,o=this.state.tiles,r=0;r<i.length;r++)i[r].i>11||(o[i[r].i][i[r].j]={isFilled:!0,color:e.color});this.setState({tiles:o},(function(){return t.checkLines()}))}},{key:"checkLines",value:function(){for(var t=this.state.tiles,e=0,i=11;i>-1;i--)for(var o=0;o<12;o++){for(var r=!0,n=0;n<12;n++)if(!t[o][n].isFilled){r=!1;break}if(r){e+=12;for(var l=o;l<11;l++)for(var s=0;s<12;s++)t[l][s]={isFilled:t[l+1][s].isFilled,color:t[l+1][s].color};for(var a=0;a<12;a++)t[i][a]={isFilled:!1,color:a%2===0?"#e6e6ff":"#f2f2f2"}}}for(var f=!0,m=0;m<12;m++)if(t[0][m].isFilled){f=!1;break}for(var u=!1,c=this.state.currentFigure.blocks,v=0;v<c.length;v++)if(c[v].i>=11){u=!0;break}this.setState({tiles:t,currentFigure:{type:-1,blocks:[]},score:this.state.score+e,gameState:f?3:u?4:2})}},{key:"updateFigure",value:function(t,e){var i=this,o=this.state.currentFigure,r=8.333333333333332,n=[],l="",s="";if(0===t?0===e||2===e?(l=4*r+"vmin",s=r+"vmin",n=[{i:o.bottom,j:o.left},{i:o.bottom,j:o.left+1},{i:o.bottom,j:o.left+2},{i:o.bottom,j:o.left+3}]):(l=r+"vmin",s=4*r+"vmin",n=[{i:o.bottom,j:o.left},{i:o.bottom+1,j:o.left},{i:o.bottom+2,j:o.left},{i:o.bottom+3,j:o.left}]):1===t?0===e?(l=3*r+"vmin",s=2*r+"vmin",n=[{i:o.bottom+1,j:o.left},{i:o.bottom,j:o.left},{i:o.bottom,j:o.left+1},{i:o.bottom,j:o.left+2}]):1===e?(l=2*r+"vmin",s=3*r+"vmin",n=[{i:o.bottom+2,j:o.left+1},{i:o.bottom,j:o.left},{i:o.bottom+1,j:o.left},{i:o.bottom+2,j:o.left}]):2===e?(l=3*r+"vmin",s=2*r+"vmin",n=[{i:o.bottom,j:o.left+2},{i:o.bottom+1,j:o.left},{i:o.bottom+1,j:o.left+1},{i:o.bottom+1,j:o.left+2}]):3===e&&(l=2*r+"vmin",s=3*r+"vmin",n=[{i:o.bottom,j:o.left},{i:o.bottom,j:o.left+1},{i:o.bottom+1,j:o.left+1},{i:o.bottom+2,j:o.left+1}]):2===t?0===e?(l=3*r+"vmin",s=2*r+"vmin",n=[{i:o.bottom+1,j:o.left+2},{i:o.bottom,j:o.left},{i:o.bottom,j:o.left+1},{i:o.bottom,j:o.left+2}]):1===e?(l=2*r+"vmin",s=3*r+"vmin",n=[{i:o.bottom,j:o.left+1},{i:o.bottom,j:o.left},{i:o.bottom+1,j:o.left},{i:o.bottom+2,j:o.left}]):2===e?(l=3*r+"vmin",s=2*r+"vmin",n=[{i:o.bottom,j:o.left},{i:o.bottom+1,j:o.left},{i:o.bottom+1,j:o.left+1},{i:o.bottom+1,j:o.left+2}]):3===e&&(l=2*r+"vmin",s=3*r+"vmin",n=[{i:o.bottom+2,j:o.left},{i:o.bottom,j:o.left+1},{i:o.bottom+1,j:o.left+1},{i:o.bottom+2,j:o.left+1}]):3===t?(l=2*r+"vmin",s=2*r+"vmin",n=[{i:o.bottom,j:o.left},{i:o.bottom+1,j:o.left},{i:o.bottom,j:o.left+1},{i:o.bottom+1,j:o.left+1}]):4===t?0===e||2===e?(l=3*r+"vmin",s=2*r+"vmin",n=[{i:o.bottom,j:o.left},{i:o.bottom,j:o.left+1},{i:o.bottom+1,j:o.left+1},{i:o.bottom+1,j:o.left+2}]):(l=2*r+"vmin",s=3*r+"vmin",n=[{i:o.bottom+1,j:o.left},{i:o.bottom+2,j:o.left},{i:o.bottom,j:o.left+1},{i:o.bottom+1,j:o.left+1}]):5===t?0===e?(l=3*r+"vmin",s=2*r+"vmin",n=[{i:o.bottom,j:o.left},{i:o.bottom,j:o.left+1},{i:o.bottom,j:o.left+2},{i:o.bottom+1,j:o.left+1}]):1===e?(l=2*r+"vmin",s=3*r+"vmin",n=[{i:o.bottom,j:o.left},{i:o.bottom+1,j:o.left},{i:o.bottom+2,j:o.left},{i:o.bottom+1,j:o.left+1}]):2===e?(l=3*r+"vmin",s=2*r+"vmin",n=[{i:o.bottom,j:o.left+1},{i:o.bottom+1,j:o.left},{i:o.bottom+1,j:o.left+1},{i:o.bottom+1,j:o.left+2}]):3===e&&(l=2*r+"vmin",s=3*r+"vmin",n=[{i:o.bottom,j:o.left+1},{i:o.bottom+1,j:o.left+1},{i:o.bottom+2,j:o.left+1},{i:o.bottom+1,j:o.left}]):6===t&&(0===e||2===e?(l=3*r+"vmin",s=2*r+"vmin",n=[{i:o.bottom,j:o.left+1},{i:o.bottom,j:o.left+2},{i:o.bottom+1,j:o.left},{i:o.bottom+1,j:o.left+1}]):1!==e&&3!==e||(l=2*r+"vmin",s=3*r+"vmin",n=[{i:o.bottom,j:o.left},{i:o.bottom+1,j:o.left},{i:o.bottom+1,j:o.left+1},{i:o.bottom+2,j:o.left+1}])),-1!==o.type)for(var a=0;a<n.length;a++)if(n[a].i<0||n[a].j>11||n[a].j<0)return;o.blocks=n,o.figHeight=s,o.figWidth=l,o.type=t,this.setState({currentFigure:o},(function(){return i.isMoving=!1}))}},{key:"keyHandling",value:function(t){var e=this;if(2===this.state.gameState||-1!==this.state.currentFigure){for(var i=this.state.currentFigure.blocks,o=0;o<i.length;o++)if(i[o].i>11)return;var r=t.keyCode;if(32===r){var n=this.state.currentFigure;n.position<3?n.position++:n.position=0,this.setState({currentFigure:n},(function(){return e.updateFigure(n.type,n.position)}))}else if(37===r){var l=this.state.currentFigure;if(0===l.left)return;for(var s=l.blocks,a=this.state.tiles,f=0;f<s.length;f++)if(a[s[f].i][s[f].j-1].isFilled)return;l.left--,this.setState({currentFigure:l,isMoving:!1},(function(){return e.updateFigure(l.type,l.position)}))}else if(39===r){for(var m=this.state.currentFigure,u=m.blocks,c=this.state.tiles,v=0;v<u.length;v++)if(11===u[v].j)return;for(var b=0;b<u.length;b++)if(c[u[b].i][u[b].j+1].isFilled)return;m.left++,this.setState({currentFigure:m},(function(){return e.updateFigure(m.type,m.position)}))}else 40===r&&this.moveFigureDown()}}},{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.keyHandling)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.keyHandling),clearInterval(this.interval)}},{key:"checkInterval",value:function(){var t=this;this.moveFigureDown();var e=500,i=this.state.score;e=i<20?500:i<40?450:i<60?400:i<100?300:i<150?200:100,this.state.currentSpeed!==e&&(clearInterval(this.interval),this.setState({currentSpeed:e},(function(){return t.interval=setInterval((function(){return t.checkInterval()}),t.state.currentSpeed)})))}}]),e}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},9:function(t,e,i){t.exports=i(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.daecd248.chunk.js.map